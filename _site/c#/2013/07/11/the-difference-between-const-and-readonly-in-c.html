<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>The difference between const and readonly in C# &#8211; </title>
<meta name="description" content="">
<meta name="keywords" content="c#, clr">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="The difference between const and readonly in C#">
<meta property="og:description" content="">
<meta property="og:url" content="/c%23/2013/07/11/the-difference-between-const-and-readonly-in-c.html">
<meta property="og:site_name" content="">
<meta property="og:image" content="/images/">





<link rel="canonical" href="/c%23/2013/07/11/the-difference-between-const-and-readonly-in-c.html">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title=" Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />






<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>
<body class="post-template" itemscope itemtype="http://schema.org/WebPage">  

<header id="masthead" class="blog-background overlay align-center align-middle animated from-bottom"  style="background-image: url(/images/)" itemscope itemtype="http://schema.org/Organization">


    <div class="inner">
        <div class="container">
            <a class="brand" href="/" role="banner" itemprop="url">

                

            <h1 class="blog-title light" itemprop="name">
                
            </h1>
                
            </a>
        </div>
    </div>
    
    
    <div class="decor-wrapper">
        <svg id="header-decor" class="decor bottom" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none">
            <path d="M0 99.9 L50 49.9 L100 99.9 L0 99.9" fill="rgba(255,255,255, 1)"></path>

            <path d="M48 52 L50 49 L52 52 L48 52" fill="rgba(255,255,255, 1)"></path>

        </svg>
    </div>
    
</header>
<div id="main" class="content" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
    <div class="container">
        <div class="row">
            <article class="post col-md-8 col-md-offset-2 hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
            
            
            
                
            
             
             
                    <header class="post-header entry-header">
                        
                        <h1 class="post-title text-center hyper lighter bordered-bottom entry-title" itemprop="headline">The difference between const and readonly in C#</h1>
                        
                        <div class="post-info text-center small">
                            <span class="entry-date date published updated"><time datetime="2013-07-11T00:00:00+02:00" class="post-time" itemprop="datePublished">11 Jul 2013</time><span>
                            in <span class="post-tags"><a href="/categories/index.html#c#" data-toggle="tooltip" title="Other posts from the C# category" rel="tag">C#</a></span>
                        </div>
                    </header>
                    <div class="post-body bordered-bottom" itemprop="description">
                        
                        <p>Const and readonly are two very useful keywords in C#. While they both perform roughly the same function, they are not implemented in the same way. As we’ll see later, being aware of the real difference between the two can help us write more robust applications.</p>

<p>In short, the difference between const and readonly is that a const’s value is known at compile time, and that a readonly variable’s value does not need to be known until runtime. Or, to be more specific, a readonly variable’s value does not need to be known until the constructor of the class containing the readonly variable finishes executing.</p>

<p>So that’s the short answer to the question. However it isn’t the full story.<a id='more' /><a id='more-1882' /> Take a look at the following code:</p>
<div class='highlight'><pre><code class='csharp'><span class='k'>const</span> <span class='n'>MyClass</span> <span class='n'>myClass</span> <span class='p'>=</span> <span class='k'>new</span> <span class='n'>MyClass</span><span class='p'>();</span>
</code></pre></div>
<p>Where MyClass is defined as:</p>
<div class='highlight'><pre><code class='csharp'><span class='k'>class</span> <span class='nc'>MyClass</span>
<span class='p'>{</span>
    <span class='k'>const</span> <span class='kt'>int</span> <span class='n'>MyInt</span> <span class='p'>=</span> <span class='m'>6</span><span class='p'>;</span>
<span class='p'>}</span>
</code></pre></div>
<p>The fact that this doesn’t compile seems quite strange at first. If a const is simply a value that needs to be known at compile time, then nothing should prevent us from doing this. The truth, however, is that a const is more than just a known value. To understand what a const really is requires that we look at some IL. Take the following program:</p>
<div class='highlight'><pre><code class='csharp'><span class='k'>class</span> <span class='nc'>Program</span>
<span class='p'>{</span>
    <span class='k'>const</span> <span class='kt'>string</span> <span class='n'>Greeting</span> <span class='p'>=</span> <span class='s'>&quot;Hello World&quot;</span><span class='p'>;</span>

    <span class='k'>static</span> <span class='k'>void</span> <span class='nf'>Main</span><span class='p'>(</span><span class='kt'>string</span><span class='p'>[]</span> <span class='n'>args</span><span class='p'>)</span>
    <span class='p'>{</span>
        <span class='n'>Console</span><span class='p'>.</span><span class='n'>WriteLine</span><span class='p'>(</span><span class='n'>Greeting</span><span class='p'>);</span>
    <span class='p'>}</span>
<span class='p'>}</span>
</code></pre></div>
<p>The corresponding IL for the Main method is as follows:</p>
<div class='highlight'><pre><code class='text'>.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       11 (0xb)
  .maxstack  8
  IL_0000:  ldstr      &quot;Hello World&quot;
  IL_0005:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_000a:  ret
} // end of method Program::Main
</code></pre></div>
<p>Now look at what happens if we change the const value to be static readonly:</p>
<div class='highlight'><pre><code class='text'>.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       11 (0xb)
  .maxstack  8
  IL_0000:  ldsfld     string ConsoleApplication2.Program::Greeting
  IL_0005:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_000a:  ret
} // end of method Program::Main
</code></pre></div>
<p>Notice the instruction IL_0000 in both cases. This is the key to understanding the difference between const and readonly. <em>When we use const to declare a constant value, the value is embedded directly into our code. When we use a readonly variable, the variable itself is referenced.</em></p>

<p>So, returning to our first example, the reason why we cannot declare</p>
<div class='highlight'><pre><code class='csharp'><span class='k'>const</span> <span class='n'>MyClass</span> <span class='n'>myClass</span> <span class='p'>=</span> <span class='k'>new</span> <span class='n'>MyClass</span><span class='p'>();</span>
</code></pre></div>
<p>is because myClass holds the memory address of an instantiation of a MyClass object. Because we cannot know this address at compile time, we cannot embed this value into our IL as is necessary when declaring a constant.</p>

<p>This distinction between consts and readonlys becomes very important when we start referencing these values across assemblies. For example, imagine that we have two assemblies: Assembly A and Assembly B. Assembly A contains the following code:</p>
<div class='highlight'><pre><code class='csharp'><span class='k'>namespace</span> <span class='nn'>AssemblyA</span>
<span class='p'>{</span>
    <span class='k'>class</span> <span class='nc'>Program</span>
    <span class='p'>{</span>
        <span class='k'>static</span> <span class='k'>void</span> <span class='nf'>Main</span><span class='p'>(</span><span class='kt'>string</span><span class='p'>[]</span> <span class='n'>args</span><span class='p'>)</span>
        <span class='p'>{</span>
            <span class='n'>Console</span><span class='p'>.</span><span class='n'>WriteLine</span><span class='p'>(</span><span class='n'>AssemblyB</span><span class='p'>.</span><span class='n'>ContainerClass</span><span class='p'>.</span><span class='n'>Value</span><span class='p'>);</span>
        <span class='p'>}</span>
    <span class='p'>}</span>
<span class='p'>}</span>
</code></pre></div>
<p>And Assembly B contains this:</p>
<div class='highlight'><pre><code class='csharp'><span class='k'>namespace</span> <span class='nn'>AssemblyB</span>
<span class='p'>{</span>
    <span class='k'>public</span> <span class='k'>class</span> <span class='nc'>ContainerClass</span>
    <span class='p'>{</span>
        <span class='k'>public</span> <span class='k'>const</span> <span class='kt'>int</span> <span class='n'>Value</span> <span class='p'>=</span> <span class='m'>6</span><span class='p'>;</span>
    <span class='p'>}</span>
<span class='p'>}</span>
</code></pre></div>
<p>If we deploy these assemblies together and run the program, the number 6 will be written to the console. However, if we modify the Value const in Assembly B and redeploy it without rebuilding Assembly A, <em>the program will continue to write number 6 to the console</em>. While this particular example is trivial, you can imagine the consequences that this kind of error can have on a real-world application. For this reason, unchanging public and protected values should only be declared as constants if they are sure to never change. If there is even a slight risk of them changing in the future, they should be declared as public static readonly variables, which will result in them being referenced by calling code instead of them being embedded directly in it.</p>
                        <br>
                    <span class="entry-tags">
                    <p>
                        <i class="icon-tags"></i>&nbsp;Tagged with <a href="/tags/index.html#c#" data-toggle="tooltip" title="Posts tagged with c#" rel="tag">c#</a>&nbsp;&bull;&nbsp;<a href="/tags/index.html#clr" data-toggle="tooltip" title="Posts tagged with clr" rel="tag">clr</a>
                    </p>
                    </span>
                    </div>
        </div>
                    <footer class="post-footer entry-meta">
                        
                        <div class="post-author text-center">                       
	        <img src="/images/" alt="'s photo" itemprop="image" class="post-avatar img-circle img-responsive"/>    
	    <h4 class="bordered-bottom vcard author" itemprop="author" itemscope itemtype="http://schema.org/Person">By <span itemprop="name" class="fn"><a href="/about" title="About " itemprop="url"></a></span></h4>
	    <p></p>
</div> 
                        
                    </footer>
            </article>
    </div>
</div>

<footer id="footer"  class="blog-background overlay text-center align-middle animated from-top" style="background-image: url(/images/)" >


    <div class="inner">
        <div class="container">

            <ul class="social-icons">
            
            
            
            
            
            
            
            
            
        </ul>
            <p class="copy-text">
                <a href="/about/"></a> &copy; 2014 &bull; All rights reserved.
            </p>
            <p class="copy-text">
                Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <i class="icon-heart"></i> <a href="http://alum.mit.edu/www/hmfaysal/">HMFAYSAL OMEGA</a> theme.
            </p>
            <ul class="menu-items">
            
            <li><a href="/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
            
        </ul>
        </div>
    </div>
    
        <div class="decor-wrapper">
            <svg id="footer-decor" class="decor top" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0 0 L50 50 L100 0 L0 0" fill="rgba(255,255,255, 1)"></path>

                <path d="M48 48 L50 51 L52 48 L48 48" fill="rgba(255,255,255, 1)"></path>

            </svg>
        </div>
    
</footer>

    
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>
    
    <script type="text/javascript" src="/assets/js/script.js"></script>



<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = ''; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> 
</body>
</html>